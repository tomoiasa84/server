[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar MongoInternals = Package.mongo.MongoInternals;\nvar Mongo = Package.mongo.Mongo;\nvar _ = Package.underscore._;\nvar CollectionExtensions = Package['lai:collection-extensions'].CollectionExtensions;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// packages/dburles_mongo-collection-instances/mongo-instances.js                                             //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nvar instances = [];\n\nCollectionExtensions.addExtension(function (name, options) {\n  instances.push({\n    name: name,\n    instance: this,\n    options: options\n  });\n});\n\nMongo.Collection.get = function(name, options) {\n  options = options || {};\n  var collection = _.find(instances, function(instance) {\n    if (options.connection)\n      return instance.name === name &&\n        instance.options && instance.options.connection._lastSessionId === options.connection._lastSessionId;\n    return instance.name === name;\n  });\n\n  return collection && collection.instance;\n};\n\nMongo.Collection.getAll = function() {\n  return instances;\n};\n\n// Meteor.Collection will lack ownProperties that are added back to Mongo.Collection\nMeteor.Collection = Mongo.Collection;\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"dburles:mongo-collection-instances\");\n\n})();\n","servePath":"/packages/dburles_mongo-collection-instances.js"}]